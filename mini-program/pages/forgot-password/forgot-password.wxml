<view class="forgot-container">
  <view class="header">
    <view class="back-btn" bindtap="goToLogin"><text>←</text></view>
    <view class="header-title">找回密码</view>
  </view>

  <view class="forgot-card">
    <block wx:if="{{!isSuccess}}">
      <view class="tip-section">
        <text class="tip-icon">💡</text>
        <view class="tip-content">
          <view class="tip-title">重置密码</view>
          <view class="tip-desc">请输入您的用户名和新密码，我们将为您重置账户密码。重置成功后请使用新密码登录。</view>
        </view>
      </view>

      <view class="form-section">
        <view class="input-group">
          <text class="input-label">用户名</text>
          <view class="input-wrapper {{errors.username ? 'error' : ''}}">
            <text class="input-icon">👤</text>
            <input 
              class="input-field" 
              placeholder="请输入您的用户名" 
              value="{{username}}"
              data-field="username"
              bindinput="onInput"
            />
          </view>
          <text class="error-tip" wx:if="{{errors.username}}">{{errors.username}}</text>
        </view>

        <view class="input-group">
          <text class="input-label">新密码</text>
          <view class="input-wrapper {{errors.newPassword ? 'error' : ''}}">
            <text class="input-icon">🔒</text>
            <input 
              class="input-field" 
              placeholder="请输入新密码（至少6位）" 
              password="{{!showNewPassword}}"
              value="{{newPassword}}"
              data-field="newPassword"
              bindinput="onInput"
            />
            <view class="password-toggle" bindtap="togglePassword" data-field="showNewPassword">
              <text>{{showNewPassword ? '🙈' : '👁️'}}</text>
            </view>
          </view>
          <text class="error-tip" wx:if="{{errors.newPassword}}">{{errors.newPassword}}</text>
        </view>

        <view class="input-group">
          <text class="input-label">确认新密码</text>
          <view class="input-wrapper {{errors.confirmPassword ? 'error' : ''}}">
            <text class="input-icon">🔐</text>
            <input 
              class="input-field" 
              placeholder="请再次输入新密码" 
              password="{{!showConfirmPassword}}"
              value="{{confirmPassword}}"
              data-field="confirmPassword"
              bindinput="onInput"
            />
            <view class="password-toggle" bindtap="togglePassword" data-field="showConfirmPassword">
              <text>{{showConfirmPassword ? '🙈' : '👁️'}}</text>
            </view>
          </view>
          <text class="error-tip" wx:if="{{errors.confirmPassword}}">{{errors.confirmPassword}}</text>
        </view>
      </view>

      <button class="submit-btn" bindtap="handleReset" disabled="{{isLoading}}">
        {{isLoading ? '重置中...' : '重置密码'}}
      </button>
    </block>

    <block wx:else>
      <view class="success-section">
        <view class="success-icon">✓</view>
        <view class="success-title">密码重置成功！</view>
        <view class="success-desc">您的密码已成功重置，请使用新密码登录系统。</view>
        
        <button class="back-login-btn" bindtap="goToLogin">返回登录</button>
      </view>
    </block>
  </view>
</view>
