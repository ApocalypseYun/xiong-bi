<!--index.wxml-->
<view class="login-container">
  <!-- è£…é¥°å…ƒç´  -->
  <view class="decorations">
    <view class="decor-circle decor-circle-1"></view>
    <view class="decor-circle decor-circle-2"></view>
    <view class="decor-circle decor-circle-3"></view>
  </view>

  <!-- LogoåŒºåŸŸ -->
  <view class="logo-section">
    <view class="logo-icon">
      <text>ğŸ”§</text>
    </view>
    <view class="app-title">å®¿èˆæŠ¥ä¿®</view>
    <view class="app-subtitle">Dormitory Repair System</view>
  </view>

  <!-- ç™»å½•å¡ç‰‡ -->
  <view class="login-card">
    <!-- è§’è‰²åˆ‡æ¢Tab -->
    <view class="role-tabs">
      <view class="role-tab {{role === 'student' ? 'active' : ''}}" bindtap="switchRole" data-role="student">
        <text class="role-tab-icon">ğŸ‘¨â€ğŸ“</text>
        <text>å­¦ç”Ÿ</text>
      </view>
      <view class="role-tab {{role === 'admin' ? 'active' : ''}}" bindtap="switchRole" data-role="admin">
        <text class="role-tab-icon">ğŸ‘¨â€ğŸ’¼</text>
        <text>ç®¡ç†å‘˜</text>
      </view>
    </view>

    <!-- è¡¨å•åŒºåŸŸ -->
    <view class="form-section">
      <!-- ç”¨æˆ·å -->
      <view class="input-group">
        <text class="input-label">ç”¨æˆ·å</text>
        <view class="input-wrapper {{usernameFocus ? 'focus' : ''}} {{errors.username ? 'error' : ''}}">
          <text class="input-icon">ğŸ‘¤</text>
          <input 
            class="input-field" 
            placeholder="è¯·è¾“å…¥ç”¨æˆ·å" 
            value="{{username}}"
            bindinput="onUsernameInput"
            bindfocus="onUsernameFocus"
            bindblur="onUsernameBlur"
          />
        </view>
        <text class="error-tip" wx:if="{{errors.username}}">{{errors.username}}</text>
      </view>

      <!-- å¯†ç  -->
      <view class="input-group">
        <text class="input-label">å¯†ç </text>
        <view class="input-wrapper {{passwordFocus ? 'focus' : ''}} {{errors.password ? 'error' : ''}}">
          <text class="input-icon">ğŸ”’</text>
          <input 
            class="input-field" 
            placeholder="è¯·è¾“å…¥å¯†ç " 
            password="{{!showPassword}}"
            value="{{password}}"
            bindinput="onPasswordInput"
            bindfocus="onPasswordFocus"
            bindblur="onPasswordBlur"
          />
          <view class="password-toggle" bindtap="togglePasswordVisibility">
            <text>{{showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸'}}</text>
          </view>
        </view>
        <text class="error-tip" wx:if="{{errors.password}}">{{errors.password}}</text>
      </view>
    </view>

    <!-- ç™»å½•æŒ‰é’® -->
    <button class="login-btn {{isLoading ? 'loading' : ''}}" bindtap="handleLogin" disabled="{{isLoading}}">
      {{isLoading ? 'ç™»å½•ä¸­...' : 'ç™» å½•'}}
    </button>

    <!-- åº•éƒ¨é“¾æ¥ -->
    <view class="bottom-links">
      <text class="link-text" bindtap="goToRegister">æ³¨å†Œè´¦å·</text>
      <text class="link-text" bindtap="goToForgotPassword">å¿˜è®°å¯†ç ?</text>
    </view>
  </view>
</view>
